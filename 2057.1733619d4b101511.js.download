!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3625ed9e-5b64-4a06-aef2-1218fbc5565e",e._sentryDebugIdIdentifier="sentry-dbid-3625ed9e-5b64-4a06-aef2-1218fbc5565e")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2057,4018],{102:(e,t,r)=>{r.d(t,{$D:()=>A,AY:()=>m,Bh:()=>_,CG:()=>f,CW:()=>U,E3:()=>R,Lo:()=>w,NK:()=>T,WY:()=>u,dR:()=>I,ep:()=>y,fx:()=>N,l3:()=>b,pD:()=>C,qk:()=>c,tX:()=>S,zV:()=>d});var n=r(46194);r(28613);var a=r(16078),s=r(21159),o=r(76171);r(89305);var i=r(53506);let l={SONIC:"/payment"},c=e=>{if(!e)return"";let t=e.startsWith("/")?"":"/";if(e.startsWith("/p/")||e.startsWith("p/"))return"".concat(t).concat(e);let r=e.replace(/\.html/,"");return/^(https|http):\/\/.*/.test(e)?r:"".concat(t,"p/").concat(r)},u=e=>e?"/p/".concat(e):"",d=(e,t)=>{let r=c(e);if(t)return w(r,t);if((0,s.A)())return r;let{origin:n}=window.location;return"".concat(n).concat(r)},p=e=>{if(!e)return"";try{return new URL(e).pathname.split("/").pop()||""}catch(e){return""}},y=e=>{try{let t=new URL(e,"https://www.zalora.ltd");return"null"!==t.pathname&&"/"!==t.pathname&&"null"!==t.origin}catch(e){return!1}},m=e=>{try{let t=new URL(e);return"null"!==t.origin}catch(e){return!1}},_=e=>c(p(e)),g=e=>!e.includes("-"),h=e=>{let{protocol:t}=window.location;return t+"//"+e},E=()=>{let{host:e}=window.location,t=(0,a.a4)(e);return"checkout.".concat(t)},f=e=>{let t=E(),r=(0,o.Z)(e);return h("".concat(t,"/").concat(r).concat(l.SONIC))},S=e=>e.endsWith(".html")||g(e)?e:"".concat(e,".html"),I=(e,t,r)=>{if(!e)return"";let[n,a=""]=e.split("?"),s=new URLSearchParams(a),o=v(t);return(Array.isArray(r)&&r.forEach(e=>{s.delete(e)}),Object.keys(o).forEach(e=>{let t=o[e];Array.isArray(t)?(s.delete(e),t.forEach(t=>s.append(e,t))):s.set(e,t)}),s.toString())?"".concat(n,"?").concat(s.toString()):n},v=e=>{let t=JSON.parse(JSON.stringify(e));return Object.keys(t).forEach(e=>{(""===t[e]||null===t[e]||void 0===t[e])&&delete t[e]}),t},T=(e,t)=>I(e,{redirectUrl:t}),w=(e,t)=>{let r=(0,a.Ib)(t);try{return new URL(e,r).toString()}catch(t){return e}},A=e=>{if(!e)return"";let[,t=""]=e.split("?");return t},N=e=>!e||(0,i.RI)(e)?"/customer/account/login":"/customer/account/login?".concat((0,n.Go)(e)),C=e=>e.replace(/\/+$/,""),b=e=>e.replace(/^\/|\/$/g,""),U=e=>{try{var t;let r=e.match(/^(?:https?:\/\/[^\/]+)?(\/[^?#]*)/);return r&&(null===(t=r[1])||void 0===t?void 0:t.startsWith("/c/"))}catch(e){return!1}},R=()=>{let e=document.referrer;return e?new URL(e).pathname:""}},8393:(e,t,r)=>{r.d(t,{u:()=>s,D:()=>o});let n=Object.freeze({hk:{Decimals:2,DecimalsSeparator:".",DisplayFormat:"HK$\xa0%s",Iso:"HKD",ThousandSeparator:","},id:{Decimals:0,DecimalsSeparator:",",DisplayFormat:"Rp\xa0%s",Iso:"IDR",ThousandSeparator:"."},my:{Decimals:2,DecimalsSeparator:".",DisplayFormat:"RM\xa0%s",Iso:"MYR",ThousandSeparator:","},ph:{Decimals:2,DecimalsSeparator:".",DisplayFormat:"Php\xa0%s",Iso:"PHP",ThousandSeparator:","},sg:{Decimals:2,DecimalsSeparator:".",DisplayFormat:"S$\xa0%s",Iso:"SGD",ThousandSeparator:","}});var a=r(33159);function s(e,t,r){if("string"==typeof e&&""===e||null==e)return"string"===t?"NaN":NaN;let{countryCode:s=(0,a.w)("CC"),shouldAddCurrencySymbol:o=!0,shouldAddThousandsSeparators:l=!0,shouldRemoveFractionalNumbers:c,shouldAddSign:u=!1,shouldRemoveSpace:d=!1,shouldKeepNonZeroDecimalsOnly:p=!1}=r||{},{Decimals:y,DisplayFormat:m,DecimalsSeparator:_,ThousandSeparator:g}=n[s],h="string"==typeof e?e:e.toFixed(y);if(h=h.replace(RegExp("\\".concat(g,"(\\d{3})"),"g"),"$1"),"."!==_&&(h=h.replace(RegExp("\\".concat(_,"(\\d{2})$"),"g"),".$1")),""===(h=h.replace(/(^[^0-9-]+)|([^0-9]+$)/g,"")))return"string"===t?"NaN":NaN;let E=Number(h);if(h=i({value:E,options:{shouldKeepNonZeroDecimalsOnly:p,shouldRemoveFractionalNumbers:c},decimalsConfig:y}),"number"===t)return parseFloat(h);if(l&&(h=h.replace(/\B(?=(\d{3})+(?!\d))/g,g)),o&&(h="".concat(m.replace("%s",h))),u&&!isNaN(E)){let e=E<0?"-":"+";h="".concat(e," ").concat(h)}return d&&(h=h.replace(/\s/g,"")),h}let o=()=>{let{Iso:e=""}=n[(0,a.w)("CC")]||{};return e},i=e=>{let{value:t,options:r,decimalsConfig:n}=e,{shouldKeepNonZeroDecimalsOnly:a,shouldRemoveFractionalNumbers:s}=r,o=Math.abs(t);return s?o.toFixed(0):a&&o%1==0?o.toFixed(0):o.toFixed(n)}},9218:(e,t,r)=>{r.d(t,{CN:()=>o,DM:()=>a,Ju:()=>c,XA:()=>i,Xn:()=>u,ZO:()=>n,m2:()=>s,uT:()=>l});let n=3e3,a=5e3,s=1500,o=300,i="calc(100vw - 98px)",l=6,c=60,u=30},15622:(e,t,r)=>{r.r(t),r.d(t,{getIJDataForAuthentication:()=>S,getMilestoneAchievementInfo:()=>E,getUserTypeTrackingMessage:()=>f,getWidgetMessageType:()=>h,trackAfterIJEligibilityCheck:()=>g,trackInteractiveJourneyAssigned:()=>m,trackInteractiveJourneyExpandedBubbleViewed:()=>u,trackInteractiveJourneyMilestoneAchieved:()=>p,trackInteractiveJourneyModalClicked:()=>y,trackInteractiveJourneyModalDismissed:()=>c,trackInteractiveJourneyModalViewed:()=>l,trackInteractiveJourneyStopped:()=>_,trackInteractiveJourneyWidgetDismissed:()=>d});var n=r(93732),a=r(1199),s=r(86902),o=r(35457),i=r(79206);let l=e=>{let{steps:t,userTypeMessage:r}=e,n=E(t);(0,i.u4)("Interactive Journey Modal Viewed",{user_type:r,...n})},c=e=>{let{steps:t,userTypeMessage:r}=e,n=E(t);(0,i.u4)("Interactive Journey Modal Dismissed",{user_type:r,...n})},u=(e,t)=>{let r=h(e);r===o.Os.MilestoneSignUpAchieved&&sessionStorage.setItem(a.o.INTERACTIVE_JOURNEY_TRACKED_SIGN_UP,"true"),(0,i.u4)("Interactive Journey Expanded Widget Viewed",{message_type:r,user_type:t})},d=e=>{let{widgetId:t,steps:r,userTypeMessage:n}=e,a=h(t),s=E(r);(0,i.u4)("Interactive Journey Widget Dismissed",{message_type:a,user_type:n,...s})},p=(e,t)=>{(0,i.u4)("Interactive Journey Milestone Achieved",{milestone_name:e,user_type:t}),e===o.Os.MilestoneSubscribeAchieved&&(0,i.u4)("Interactive Journey Subscribe Milestone Achieved",{message_type:e,user_type:t})},y=(e,t)=>{let r={[s.K3.INSTALL]:"milestone_install",[s.K3.SIGN_UP]:"milestone_sign_up",[s.K3.ENABLE_WHATSAPP]:"milestone_subscribe_whatsapp",[s.K3.ENABLE_PUSH_NOTIFICATION]:"milestone_pn"}[e];r&&(0,i.u4)("Interactive Journey Modal Clicked",{milestone_action:r,user_type:t})},m=e=>{(0,i.u4)("IJ Assigned",e,{shouldIncludeSourcePageType:!0})},_=e=>{e&&(0,i.u4)("IJ Stopped",{stop_condition:e})},g=e=>{let t,{isIJEnabled:r,userTypeMessage:o,stopCondition:i,user:l}=e,c=localStorage.getItem(s.Hh.ASSIGN_IJ),u=sessionStorage.getItem(a.o.INTERACTIVE_JOURNEY_LOGIN_METHOD);if(t=l?"signUp"===u?s.bM.SIGNED_UP:s.bM.LOGGED_IN:s.bM.ANONYMOUS,r&&null===c){m({first_assigned:!0,user_state:t,user_type:o}),(0,n.ZB)(s.Hh.ASSIGN_IJ,"true");return}if(r&&"true"===c){m({first_assigned:!1,user_state:t,user_type:o});return}if(!r&&null!==c){_(i);return}},h=e=>{switch(e){case s.cj.SIGNED_UP:return o.Os.MilestoneSignUpAchieved;case s.cj.ENABLED_WHATSAPP:return o.Os.MilestoneSubscribeAchieved;default:return o.Os.EarnReward}},E=e=>{let t={[o.fl.Install]:o.jY.NotAchieved,[o.fl.SignUp]:o.jY.NotAchieved,[o.fl.PushNotification]:o.jY.NotAchieved,[o.fl.Subscribe]:o.jY.NotAchieved};return e.forEach(e=>{let{identifier:r,shouldShowVoucher:n}=e;if(n)switch(r){case s.K3.INSTALL:case s.K3.ENABLE_PUSH_NOTIFICATION:return;case s.K3.SIGN_UP:t[o.fl.SignUp]=o.jY.Achieved;return;case s.K3.ENABLE_WHATSAPP:t[o.fl.Subscribe]=o.jY.Achieved;return}}),t},f=e=>{switch(e){case s.an.EXISTING:return s.f9.EXISTING;case s.an.NEW:return s.f9.NEW;default:return}},S=e=>{let{isIJEnabled:t,userType:r}=e,n=a.o.INTERACTIVE_JOURNEY_ORIGIN_STEP;return sessionStorage.getItem(n)?(sessionStorage.removeItem(n),{}):{nc_interactive_variant:t&&r===s.an.NEW?"nc_interactive_journey":"false",list_id:t?"interactive_journey":void 0}}},17911:(e,t,r)=>{r.d(t,{BW:()=>a,EV:()=>s,Wx:()=>n});let n=async e=>new Promise(t=>{let r=new IntersectionObserver(e=>{let[n]=e;t(n.boundingClientRect),r.disconnect()});r.observe(e)}),a=e=>new DOMParser().parseFromString(e,"text/html"),s=async e=>{let t=e.getElementsByTagName("script");for(let e=0;e<t.length;e++){let r=t[e].textContent||"";if(""!==r.trim())try{window.eval(r)}catch(e){}}}},23539:(e,t,r)=>{r.d(t,{H:()=>a,K:()=>s});var n=r(73140);let a=async e=>{let{item:t,items:r,key:a,type:s="staticBlock",locale:o}=e;return await n.A.request("GET /cms/".concat(s,"/{key}"),{request:{headers:o?{"Content-Language":o}:{}},params:{path:[encodeURIComponent(a)],query:{item:t||r}}})},s=async e=>{let{data:t}=await n.A.request("GET /cms/brandslist/{key}",{params:{path:[e]}});return(null==t?void 0:t.BrandList)||[]}},25482:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(75908),a=r(73140),s=r(88677);let o=()=>{let{data:e}=(0,s.A)();return(0,n.A)(e?"GET /cashback/summary":null,async()=>{let{data:e,error:t}=await a.A.request("GET /cashback/summary",{request:{credentials:"include"}});if(t)throw t;return e})}},26543:(e,t,r)=>{r.d(t,{P:()=>s});var n=r(21462);let a=e=>e;function s(e,t=a){let r=n.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return n.useDebugValue(r),r}},28613:(e,t,r)=>{r.d(t,{g:()=>a});var n=r(33159);let a=()=>(0,n.w)("CC")},31470:(e,t,r)=>{r.d(t,{ER:()=>y,Ht:()=>l,Qp:()=>u,dF:()=>m,di:()=>d,jA:()=>o,lO:()=>p,o1:()=>_,qS:()=>c,rT:()=>i});var n=r(9218),a=r(86902),s=r(15622);let o=e=>e.isEnabled,i=e=>e.userType,l=e=>e.isUserTypeTransition,c=e=>e.shouldShowConfetti,u=e=>e.confettiCount,d=e=>e.accomplishedStep,p=e=>(0,s.getUserTypeTrackingMessage)(i(e)),y=e=>{let{userType:t,shouldShowConfetti:r,isUserTypeTransition:s}=e;return{growAnimationDelay:r&&t===a.an.EXISTING?n.m2:n.ZO,shrinkAnimationDelay:s?n.DM:n.ZO}},m=e=>{let{isIJWidgetClosed:t,isEnabled:r}=e;return r&&!t},_=e=>({setIsIJEnabled:e.setIsIJEnabled,setIJUserType:e.setIJUserType,setShouldShowIJConfetti:e.setShouldShowIJConfetti,setAccomplishedStep:e.setAccomplishedStep,setIsUserTypeTransition:e.setIsUserTypeTransition,setIsIJWidgetClosed:e.setIsIJWidgetClosed})},32563:(e,t,r)=>{r.d(t,{y:()=>a});var n=r(21462);let a=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(0,n.useRef)(!1);(0,n.useEffect)(()=>{!r.current&&t&&(e(),r.current=!0)},[t,e])}},35457:(e,t,r)=>{r.d(t,{Os:()=>s,fl:()=>n,jY:()=>a});var n=function(e){return e.Install="install_milestone",e.SignUp="signup_milestone",e.PushNotification="pn_milestone",e.Subscribe="subscribe_milestone",e}({}),a=function(e){return e.Achieved="achieved",e.NotAchieved="not_achieved",e}({}),s=function(e){return e.EarnReward="earn_reward_message",e.MilestoneSignUpAchieved="milestone_sign_up_achieved",e.MilestoneSubscribeAchieved="milestone_subscribe_achieved",e}({})},36383:(e,t,r)=>{r.d(t,{k:()=>o});var n=r(49759),a=r(43107),s=r(59873);let o=()=>(0,a.n)((0,n.k)(s.LU))},43107:(e,t,r)=>{r.d(t,{n:()=>o,o:()=>i});var n=r(49759),a=r(43931),s=r(59873);let o=(0,a.A)("ui"),i=()=>o((0,n.k)(s.o1))},43931:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(9889),a=r(21462),s=r(26543),o=r(96092);let i=e=>t=>{let{[e]:r}=(0,a.useContext)(n.P);if(!r)throw new o.aD('‚ùå Store "'.concat(e,'" was not found in <StoreContext>.\n\n')+'Did you pass "'.concat(e,'" through preloadStoreState?\n\n')+'Hint: Pass an empty object "{}" if there are no default values.\n\n');return(0,s.P)(r,t)}},46194:(e,t,r)=>{r.d(t,{DC:()=>l,Go:()=>o,LT:()=>i,VQ:()=>c});var n=r(57027),a=r(33159),s=r(86912);let o=e=>Object.keys(e).sort().reduce((t,r)=>{if(Array.isArray(e[r])){let n=e[r];t.push(...n.map(e=>"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(e))))}else void 0!==e[r]&&null!==e[r]&&""!==e[r]&&t.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(e[r])));return t},[]).join("&"),i=e=>{let t=(0,a.w)("CC")||"";return(n._[t]||[]).reduce((t,r)=>e[r]?[...t,{id:r,name:e[r]}]:[...t],[])},l=e=>{let t={...e};return Object.keys(t).forEach(e=>{(void 0===t[e]||null===t[e]||""===t[e])&&delete t[e]}),t},c=async e=>{let t=null;try{t=e.clone();let{err_code:r,err_info:n}=await e.json();return new s.h({message:n,code:r,status:e.status,url:e.url,type:e.type})}catch(n){let r=t?await t.text():void 0;return new s.h({message:"Response body is not json",data:r,status:e.status,url:e.url,type:e.type})}}},49759:(e,t,r)=>{r.d(t,{k:()=>l});var n=r(21462);let a=e=>Symbol.iterator in e,s=e=>"entries"in e,o=(e,t)=>{let r=e instanceof Map?e:new Map(e.entries()),n=t instanceof Map?t:new Map(t.entries());if(r.size!==n.size)return!1;for(let[e,t]of r)if(!Object.is(t,n.get(e)))return!1;return!0},i=(e,t)=>{let r=e[Symbol.iterator](),n=t[Symbol.iterator](),a=r.next(),s=n.next();for(;!a.done&&!s.done;){if(!Object.is(a.value,s.value))return!1;a=r.next(),s=n.next()}return!!a.done&&!!s.done};function l(e){let t=n.useRef(void 0);return r=>{var n;let l=e(r);return Object.is(n=t.current,l)||"object"==typeof n&&null!==n&&"object"==typeof l&&null!==l&&(a(n)&&a(l)?s(n)&&s(l)?o(n,l):i(n,l):o({entries:()=>Object.entries(n)},{entries:()=>Object.entries(l)}))?t.current:t.current=l}}},57027:(e,t,r)=>{r.d(t,{P:()=>y,_:()=>p});let{WOMEN:n,MEN:a,SPORTS:s,LUXURY:o,BEAUTY:i,KIDS:l,HOME_AND_LIFESTYLE:c,HOBBIES:u,LEGACY_HOME:d}=r(72682).L,p={sg:[n,a,o,s,i,l,c,u],my:[n,a,o,s,i,l,c,u],hk:[n,a,o,s,i,l,c,u],id:[n,a,s,l,o,i,c,u],ph:[n,a,o,s,l,i,c,u,d]},y="all"},59873:(e,t,r)=>{r.d(t,{Az:()=>s,J8:()=>E,JF:()=>o,LU:()=>T,Lw:()=>d,Oq:()=>i,Pk:()=>c,Z9:()=>u,ZX:()=>h,ki:()=>l,lL:()=>y,o1:()=>w,oL:()=>_,oY:()=>p,q7:()=>m,z8:()=>g});var n=r(45415),a=r.n(n);let s=e=>e.activeSegment,o=e=>e.segments,i=e=>e.toastStack,l=e=>e.modalStack,c=e=>e.activeModalIdx,u=e=>e.isOpenAppSmartBanner,d=e=>e.deeplink,p=e=>e.modalStack.length>0,y=e=>e.pdvInteractedListeners,m=e=>e.topBrands,_=e=>e.topSearches,g=e=>e.footerContent,h=e=>e.selectedSecondLevelNavigationItem,E=e=>e.layoutName,f=e=>e.layoutName===a().SMOBILE.name||e.layoutName===a().LMOBILE.name,S=e=>e.layoutName===a().TABLET.name,I=e=>e.layoutName===a().DESKTOP.name,v=e=>void 0!==e.layoutName,T=e=>({layoutName:E(e),isMobile:f(e),isTablet:S(e),isDesktop:I(e),isHydrated:v(e)}),w=e=>({addToast:e.addToast,setToastStack:e.setToastStack,showModal:e.showModal,_setActiveModalIdx:e._setActiveModalIdx,_setModalStack:e._setModalStack,closeAppSmartBanner:e.closeAppSmartBanner,setDeeplink:e.setDeeplink,setActiveSegment:e.setActiveSegment,addPdvInteractedListener:e.addPdvInteractedListener,clearPdvInteractedListener:e.clearPdvInteractedListener,setSegments:e.setSegments,setSelectedSecondLevelNavigationItem:e.setSelectedSecondLevelNavigationItem})},66194:(e,t,r)=>{let n;r.d(t,{j:()=>p,K:()=>d});var a=r(26543),s=r(49759),o=r(31470),i=r(15475),l=r(1141),c=r(86902);let u=()=>(0,i.y)((0,l.m)((e,t)=>({isEnabled:!1,shouldShowConfetti:!1,confettiCount:0,userType:c.an.UNKNOWN,isUserTypeTransition:!1,isIJWidgetClosed:!1,setIsIJEnabled:t=>{e(e=>{e.isEnabled=t})},setIJUserType:t=>{e(e=>{e.userType=t})},setShouldShowIJConfetti:r=>{let n=t().confettiCount;e(e=>{e.shouldShowConfetti=r,r&&(e.confettiCount=n+1)})},setAccomplishedStep:t=>{e(e=>{e.accomplishedStep=t})},setIsUserTypeTransition:t=>{e(e=>{e.isUserTypeTransition=t})},setIsIJWidgetClosed:t=>{e(e=>{e.isIJWidgetClosed=t})}}))),d=e=>(n||(n=u()),(0,a.P)(n,e)),p=()=>d((0,s.k)(o.o1))},67811:(e,t,r)=>{r.d(t,{X:()=>a});var n=r(21159);let a=e=>{var t;!(0,n.A)()&&(null===(t=window.dataLayer)||void 0===t||t.push(e))}},69249:(e,t,r)=>{r.d(t,{SU:()=>_,yi:()=>y,Pm:()=>m});let n="sb-closed";var a=r(33159),s=r(53506);let o=e=>{let t=window.AF_SMART_SCRIPT,r=i(t)?t:void 0;if(!r)return"";let n=l(e),a=r.generateOneLinkURL(n);if(!a)return"";let{clickURL:s}=a;return s},i=e=>(0,s.Gv)(e)&&"function"==typeof e.generateOneLinkURL,l=e=>({oneLinkURL:(0,a.w)("APPSFLYER_ONE_LINK_URL")||"",afParameters:{mediaSource:{keys:["utm_source","pid"],defaultValue:"web"},campaign:{keys:["utm_campaign","c"]},deepLinkValue:{keys:["deep_link_value"],defaultValue:e},afCustom:[{paramKey:"af_siteid",keys:["af_siteid"]},{paramKey:"af_c_id",keys:["af_c_id"]},{paramKey:"clickid",keys:["clickid"]},{paramKey:"af_media_type",keys:["af_media_type"]},{paramKey:"af_force_deeplink",defaultValue:"true"},{paramKey:"af_dp",defaultValue:"zalora%3A%2F%2F"},{paramKey:"advertising_id",keys:["advertising_id"]},{paramKey:"idfa",keys:["idfa"]},{paramKey:"adv2",keys:["adv2"]},{paramKey:"appleifa",keys:["appleifa"]},{paramKey:"af_sub_siteid",keys:["af_sub_siteid"]},{paramKey:"is_retargeting",keys:["is_retargeting"],defaultValue:"true"},{paramKey:"af_ss_ui",defaultValue:"true"},{paramKey:"channel",defaultValue:"web-to-app"},{paramKey:"campaignName",keys:["campaignName"]},{paramKey:"messageType",keys:["messageType"]}],ad:{keys:["utm_medium","af_ad"]},channel:{keys:["af_channel","utm_source"]}}});var c=r(65967),u=r(82273),d=r(72950),p=r(102);let y=()=>"true"===new u.A().get(n),m=()=>{new u.A().set(n,"true",(0,c.X$)({minutes:1}).toUTCString())},_=e=>{if(!e)return"";let t=document.referrer,r=(0,d.d)(t),n=encodeURIComponent(e);if(r)return g(e,r);let a=o(n);return a||g(e,r)},g=(e,t)=>{let r=(0,a.w)("APPSFLYER_ONE_LINK_URL")||"",n="".concat(r).concat(window.location.search);return(0,p.dR)(n,{deep_link_value:e,af_dp:e,af_force_deeplink:"true",af_xp:"custom",pid:t?"search_engine":"web_to_app",c:t?"zalora_seo":"web_to_app_direct"})}},71575:(e,t,r)=>{r.d(t,{D:()=>s});let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,s=e=>{let t="";if(window.crypto&&window.crypto.getRandomValues){let r=new Uint32Array(e);window.crypto.getRandomValues(r);for(let s=0;s<e;s++)t+=n[r[s]%a];return t}for(let r=0;r<e;r++)t+=n[Math.floor(Math.random()*a)];return t}},72057:(e,t,r)=>{r.r(t),r.d(t,{default:()=>er});var n=r(23798),a=r(15205),s=r.n(a),o=r(21462),i=r(75908),l=r(23539),c=r(96310);let u=async e=>{try{let{data:t,error:r}=await (0,l.H)({key:"web_enable_forethought_chat",type:"staticBlock",locale:e});if(r)throw r;return t.Text||""}catch(e){return(0,c.l)("Error when fetching CMS key web_enable_forethought_chat",{error:e,tag:"get-request"}),""}};var d=r(89305),p=r(32405);let y=e=>{let{locale:t=""}=(0,a.useRouter)(),r=e&&(!(0,p.av)()||(0,d.vq)(window.location.pathname));return(0,i.A)(r?"cms/staticBlock/".concat("web_enable_forethought_chat"):null,()=>u(t))};var m=r(17911);let _=()=>{let[e,t]=(0,o.useState)(!1),{data:r}=y(e);(0,o.useEffect)(()=>{let e=()=>{t(!0)},r=()=>{"complete"===document.readyState&&e()};if("complete"!==document.readyState)return document.addEventListener("readystatechange",r),()=>{document.removeEventListener("readystatechange",r)};e()},[]),(0,o.useEffect)(()=>{if(a()){let e=document.getElementById("trigger-widget-button");e&&(e.style.display="none")}else if(r){let e=(0,m.BW)(r);(0,m.EV)(e)}},[r]);let a=()=>!!document.getElementById("forethought-chat");return r?(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:r},className:"absolute z-20"}):null},g=(0,o.memo)(()=>(0,n.jsx)(n.Fragment,{}));var h=r(73140),E=r(56063),f=r(1199),S=r(41863),I=r(88677),v=r(36383),T=r(66194),w=r(86902),A=r(94018),N=r(15622);let C=()=>{let e=(0,T.j)(),{isMobile:t}=(0,v.k)(),{data:n,isLoading:a}=(0,I.A)(),s=(0,S.O)(E.A.Bob.LOTUS_ENABLE_INTERACTIVE_JOURNEY),l=(0,S.O)(E.A.Bob.LOTUS_ENABLE_INTERACTIVE_JOURNEY_EU),c=s||l,{data:u,isLoading:d}=(0,i.A)(c&&t&&n?["interactive-journey/order-count",n.Zuid]:null,async()=>{let{data:e}=await h.A.request("GET /orders/items",{request:{credentials:"include"},params:{query:{limit:1}},transform:e=>e.Items?e.Items.length:void 0});return e}),{data:p,isLoading:y}=(0,i.A)(c&&t&&!a&&!d?"interactive-journey/is-enabled":null,()=>(0,A.getIsInteractiveJourneyEnabledData)({user:n,orderCount:u,isEuFlagEnabled:l,isNuFlagEnabled:s}),{onSuccess:e=>{let{isEnabled:t,userType:a,stopCondition:s}=e;Promise.resolve().then(r.bind(r,15622)).then(e=>{let{trackAfterIJEligibilityCheck:r}=e;r({isIJEnabled:t,userTypeMessage:(0,N.getUserTypeTrackingMessage)(a),stopCondition:s,user:n})}).catch(()=>{})}});return(0,o.useEffect)(()=>{if(y||!p)return;let{isEnabled:t,userType:r}=p;if(e.setIsIJEnabled(t),e.setIJUserType(r||w.an.UNKNOWN),e.setIsIJWidgetClosed("true"===sessionStorage.getItem(f.o.INTERACTIVE_JOURNEY_WIDGET_CLOSED)),t&&r&&r!==w.an.UNKNOWN){let t=sessionStorage.getItem(f.o.INTERACTIVE_JOURNEY_USER_TYPE);"string"==typeof t&&t!==r&&r===w.an.EXISTING&&(e.setIsUserTypeTransition(!0),e.setShouldShowIJConfetti(!0)),sessionStorage.setItem(f.o.INTERACTIVE_JOURNEY_USER_TYPE,r)}},[p,y,e]),null};var b=r(43107),U=r(59873),R=r(65967);let O="sessionCount",k="pageCount",P=()=>{let e=new R.Ay,t=e.get(O)||"0",r=e.get(k)||"0";"0"===r?(r="1",t="".concat(parseInt(t)+1)):r="".concat(parseInt(r)+1);let n=new Date;n.setMinutes(n.getMinutes()+30);let a=n.toUTCString();return e.set(O,t),e.set(k,r,a),{pageCount:r,sessionCount:t}};var L=r(67811),D=r(8393),M=r(11408),J=r(89018);let Y=async e=>{let t=await (0,J.VJ)(e),r=new R.Ay,n=new Date;return n.setFullYear(n.getFullYear()+2),r.set(M.e.UAID,t,n.toUTCString()),{uaid:t}};var j=r(25482);let K=()=>{let e=(0,a.useRouter)(),t=e.locale,n=(0,D.D)(),{data:s}=(0,I.A)(),i=(0,b.n)(U.Az),{data:l}=(0,j.A)(),c=(0,o.useCallback)(async()=>{let a=new R.Ay,{uaid:o}=await Y(),c=a.get(k),u=a.get(O);r.e(209).then(r.bind(r,20209)).then(r=>{var a;let{default:d}=r,p=d({currency:n,activeSegment:i,user:s,uaid:o,locale:t,router:e,pageCount:c,sessionCount:u,cashbackExpriringSoon:(null==l?void 0:null===(a=l.SoonestExpiry)||void 0===a?void 0:a.ExpiryDate)||void 0});(0,L.X)(p)})},[n,s,i,t,e,l]);(0,o.useEffect)(()=>{c()},[c])},B="scrollPositions",x=()=>{try{return JSON.parse(sessionStorage.getItem(B)||"{}")}catch(e){return{}}},H=e=>{try{sessionStorage.setItem(B,JSON.stringify(e))}catch(e){}},V=(e,t)=>{H({...x(),[e]:t})},G=e=>{let t=x(),r=t[e];r&&r>0&&window.scrollTo(0,r),delete t[e],H(t)};var W=r(90530);let F=[d.N7.Catalog,d.N7.Search,d.N7.ZIS];var q=r(32563);let X=["true","1"],Z=e=>{let[t,r]=e.split("?"),n=new URLSearchParams(r);n.delete("toApp");let a=n.toString();return"".concat(t).concat(a?"?":"").concat(a)},z=e=>X.includes(e),$=()=>{let e=(0,b.n)(U.Lw),t=(0,a.useRouter)();(0,q.y)(()=>{e&&((0,p.Ug)()||(document.location=e),t.replace({pathname:t.pathname,query:t.query},Z(t.asPath),{shallow:!0}))},z(t.query.toApp)&&!!e)};var Q=r(16078),ee=r(89045);let et=(e,t)=>{e.cancelled||(0,c.l)("There was an error changing routes",{error:e,params:{url:t},tag:"handler"})},er=()=>{let e=(0,a.useRouter)();return K(),$(),!function(){let e=(0,a.useRouter)();(0,o.useEffect)(()=>{let t=(0,d.M5)();if(!F.includes(t)||!("scrollRestoration"in window.history))return;window.history.scrollRestoration="manual";let r=()=>{V(e.asPath,window.scrollY)},n=e=>{(0,W.A)(()=>{G(e)})};return s().events.on("routeChangeStart",r),s().events.on("routeChangeComplete",n),()=>{s().events.off("routeChangeStart",r),s().events.off("routeChangeComplete",n)}},[e])}(),(0,o.useEffect)(()=>{(0,W.A)(()=>{(0,ee.B)()}),P()},[e]),(0,o.useEffect)(()=>{let e=(0,p.Xs)(),t=(0,Q.ED)(location.hostname).split("-")[0]||"";return(0,R.Ck)(t),()=>{e()}},[]),(0,o.useEffect)(()=>(e.events.on("routeChangeError",et),()=>{e.events.off("routeChangeError",et)}),[e]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g,{}),(0,n.jsx)(_,{}),(0,n.jsx)(C,{})]})}},72682:(e,t,r)=>{r.d(t,{L:()=>n});var n=function(e){return e.WOMEN="women",e.MEN="men",e.KIDS="kids",e.BEAUTY="beauty",e.LEGACY_HOME="home",e.HOME_AND_LIFESTYLE="lifestyle",e.HOBBIES="hobbies",e.LUXURY="luxury",e.SPORTS="sports",e}({})},72950:(e,t,r)=>{r.d(t,{d:()=>a});let n=[".*www.google..*",".*bing.*",".*yahoo.*",".*duckduckgo.*",".*baidu.*",".*naver.*"],a=e=>!!e&&n.some(t=>RegExp(t,"i").test(e))},76171:(e,t,r)=>{r.d(t,{Z:()=>n});let n=e=>"string"!=typeof e?"":e.split("-")[0]},86912:(e,t,r)=>{r.d(t,{h:()=>n});class n extends Error{constructor({message:e,code:t,status:r,data:n,url:a,type:s}){super(e),this.name="ApiError",this.url=a,this.message=e,this.type=s,this.code=t,this.status=r,this.data=n}}},88391:(e,t,r)=>{r.d(t,{H:()=>o});var n=r(36664),a=r(33159),s=r(31202);let o=e=>{window.__USER__=e;let t=(0,a.w)("SEGMENT_API_KEY");t&&(0,s.Q2)()&&"load"in window.analytics&&((0,s.OF)(),window.analytics.addSourceMiddleware(e=>{let{payload:t,next:r}=e;try{let e=t.obj.context.traits||{};window.__USER__&&0===Object.keys(e).length&&(t.obj.context.traits=window.analytics.user().traits()),t.obj.context.internal_anonymous_id=(0,n.lA)()}catch(e){}r(t)}),analytics.load(t,{flushAt:1}))}},88677:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(75908),a=r(73140),s=r(11691),o=r(88391);let i=()=>{let e=(0,s.$)(),t=(0,s.Z)(e);return(0,n.A)(t?null:"/v1/customers",async()=>{let{data:e}=await a.A.request("GET /customers",{request:{credentials:"include"}});return e},{dedupingInterval:6e4,shouldRetryOnError:!1,revalidateOnMount:!0,fallbackData:void 0,onSuccess:e=>{(0,o.H)(e)},onError:()=>{(0,o.H)(null)}})}},89018:(e,t,r)=>{r.d(t,{ZH:()=>i,eM:()=>o,fX:()=>d,P9:()=>c,VJ:()=>s,m:()=>l});var n=r(71575);let a=async e=>{let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")},s=async e=>(null==e?void 0:e.Zuid)?(await a(e.Zuid)).substring(0,10):(0,n.D)(10),o=e=>{try{navigator.clipboard.writeText(e)}catch(e){}},i=e=>e?e.replace(/(?:[a-zA-Z\d:']+)/g,e=>e[0].toUpperCase()+e.substring(1).toLowerCase()):e,l=e=>e?e.replace(/\s+/g," ").trim():e,c=(e,t)=>{let r=e.slice(-t),n=e.length-r.length;return n>0?"*".repeat(n)+r:"*".repeat(e.length)},u=e=>e.replace(/[.*+?^${}()<>|[\]\\]/g,"\\$&"),d=e=>RegExp(encodeURI(u(e)),"gi")},90530:(e,t,r)=>{r.d(t,{A:()=>n});let n=e=>{var t;if(window){if("scheduler"in window&&"function"==typeof(null===(t=window.scheduler)||void 0===t?void 0:t.postTask)){window.scheduler.postTask(e,{priority:"background"});return}if("requestIdleCallback"in window){requestIdleCallback(e);return}setTimeout(e,0)}}},94018:(e,t,r)=>{r.r(t),r.d(t,{getHeader:()=>d,getHeaderTitle:()=>m,getInteractiveJourneyData:()=>u,getIsInteractiveJourneyEnabledData:()=>g,getSteps:()=>p,getWidget:()=>y,persistAuthenticationInfo:()=>_});var n=r(9218),a=r(29051),s=r(1199),o=r(86902),i=r(99095),l=r(69249),c=r(102);let u=e=>{if(!e)return{headersCollection:void 0,stepsCollection:void 0,widgetsCollection:void 0,transitionMessage:void 0};let t=e.interactiveJourneyV2Collection.items||[];if(0===t.length)return{headersCollection:void 0,stepsCollection:void 0,widgetsCollection:void 0,transitionMessage:void 0};let{headersCollection:r,stepsCollection:n,widgetsCollection:a,transitionMessage:s}=t[0];return{headersCollection:r,stepsCollection:n,widgetsCollection:a,transitionMessage:s}},d=e=>{let t,{headersCollection:r,isLoggedIn:n,url:a}=e;if(!r)return;let s=r.items||[];if(0===s.length)return;let{searchParams:i}=new URL(a),l=i.has("campaignName"),c=i.get("campaignName"),u=i.has("messageType"),d=i.get("messageType");if(n){let e="".concat(o.vh.SIGNED_UP);t=l&&u?s.find(t=>{let{id:r}=t;return r==="".concat(e,"-").concat(d,"-").concat(c)}):l?s.find(t=>{let{id:r}=t;return r==="".concat(e,"-").concat(c)}):u?s.find(t=>{let{id:r}=t;return r==="".concat(e,"-").concat(d)}):s.find(t=>{let{id:r}=t;return r===e})}else l&&(t=s.find(e=>{let{id:t}=e;return t==="".concat(o.vh.CAMPAIGN,"-").concat(c)}));return t||(t=s.find(e=>{let{id:t}=e;return t===o.vh.DEFAULT})),t},p=e=>{let{deeplink:t,stepsCollection:r,user:n}=e,s=[];if(!r)return s;let i=[o.K3.INSTALL,o.K3.SIGN_UP,o.K3.ENABLE_PUSH_NOTIFICATION,o.K3.ENABLE_WHATSAPP];return(r.items||[]).forEach(e=>{if(!i.includes(e.identifier))return;let r={...e,shouldShowVoucher:!1,url:""};switch(e.identifier){case o.K3.INSTALL:case o.K3.ENABLE_PUSH_NOTIFICATION:r.url=(0,l.SU)(t),r.shouldShowVoucher=!1;break;case o.K3.SIGN_UP:r.url=(0,c.NK)(a.B.REGISTER,window.location.href),r.shouldShowVoucher=!!n;break;case o.K3.ENABLE_WHATSAPP:r.shouldShowVoucher=!!(null==n?void 0:n.IsVerified)}s.push(r)}),s},y=e=>{let{widgetsCollection:t,isSignedUp:r,isSubscribed:n,url:a}=e;if(!t)return;let s=t.items||[];if(0===s.length)return;let i=e=>s.find(t=>t.id===e),{searchParams:l}=new URL(a),c=l.has("campaignName"),u=l.get("campaignName"),d=i(o.cj.ENABLED_WHATSAPP);if(n&&d)return d;let p=i(o.cj.SIGNED_UP);return!c&&r&&p?p:c&&i(r?"".concat(o.cj.CAMPAIGN,"-").concat(u,"-").concat(o.cj.SIGNED_UP):"".concat(o.cj.CAMPAIGN,"-").concat(u))||i(o.cj.DEFAULT)},m=e=>{let{userName:t,title:r,fallbackTitle:n}=e;if(!r)return n;let a=r.includes("{userName}");return a&&t?r.replace("{userName}",t):a?n:r},_=e=>{e&&(sessionStorage.setItem(s.o.INTERACTIVE_JOURNEY_LOGIN_METHOD,e),"signUp"===e&&sessionStorage.setItem(s.o.INTERACTIVE_JOURNEY_SIGN_UP,"true"))},g=async e=>{let t,{user:r,orderCount:a,isNuFlagEnabled:s,isEuFlagEnabled:l}=e;if(!s&&!l)return{isEnabled:!1,userType:void 0,stopCondition:void 0};let c=await (0,i.X1)(r)>n.Xn,u=!0,d=c&&l?o.an.EXISTING:o.an.NEW;return s||d!==o.an.NEW?"number"==typeof a&&a>0?(u=!1,t=o.wE.FIRST_ORDER_PLACED):c&&s&&!l&&(u=!1,t=o.wE.ZUID_EXIST_30_DAYS):u=!1,{isEnabled:u,userType:d,stopCondition:t}}},99095:(e,t,r)=>{r.d(t,{X1:()=>u,t2:()=>c,g2:()=>l});var n=r(93732),a=function(e){return e[e.CUSTOMER_TYPE_NEVER_PURCHASED=0]="CUSTOMER_TYPE_NEVER_PURCHASED",e[e.CUSTOMER_TYPE_FIRST_PURCHASE=1]="CUSTOMER_TYPE_FIRST_PURCHASE",e[e.CUSTOMER_TYPE_PURCHASED=2]="CUSTOMER_TYPE_PURCHASED",e[e.CUSTOMER_TYPE_NL_SUBSCRIBED=3]="CUSTOMER_TYPE_NL_SUBSCRIBED",e[e.CUSTOMER_TYPE_VISITOR=4]="CUSTOMER_TYPE_VISITOR",e}({}),s=r(67814),o=r(14992),i=r(96310);let l=(e,t)=>{let r=!!(null==e?void 0:e.Id),n=(null==e?void 0:e.OrderCount)||0,i=(0,o.M)(t.pathname).includes(s.R.success),l=!!(null==e?void 0:e.Zuid);switch(!0){case r&&n<1:case r&&1===n&&i:return a.CUSTOMER_TYPE_NEVER_PURCHASED;case r&&1===n&&!i:return a.CUSTOMER_TYPE_FIRST_PURCHASE;case r&&n>1:return a.CUSTOMER_TYPE_PURCHASED;case l:return a.CUSTOMER_TYPE_NL_SUBSCRIBED;default:return a.CUSTOMER_TYPE_VISITOR}},c=e=>{try{let t=new Date("".concat(e,"T00:00:00")).getFullYear();return isNaN(t)?void 0:t}catch(e){return}},u=async e=>{if(!e||!e.CreatedAt)return NaN;try{return(0,n.EZ)(new Date,e.CreatedAt,"yyyy-MM-dd HH:mm:ss")}catch(e){return(0,i.l)("Error calculating account age in days",{error:e,tag:"get-request"}),NaN}}}}]);
//# sourceMappingURL=2057.1733619d4b101511.js.map
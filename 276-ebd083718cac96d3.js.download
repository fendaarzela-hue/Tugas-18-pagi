!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8341956a-a61e-4f41-9194-b290ad8207e8",e._sentryDebugIdIdentifier="sentry-dbid-8341956a-a61e-4f41-9194-b290ad8207e8")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{9218:(e,t,n)=>{n.d(t,{CN:()=>a,DM:()=>s,Ju:()=>d,XA:()=>o,Xn:()=>u,ZO:()=>i,m2:()=>r,uT:()=>l});let i=3e3,s=5e3,r=1500,a=300,o="calc(100vw - 98px)",l=6,d=60,u=30},15622:(e,t,n)=>{n.r(t),n.d(t,{getIJDataForAuthentication:()=>v,getMilestoneAchievementInfo:()=>y,getUserTypeTrackingMessage:()=>h,getWidgetMessageType:()=>p,trackAfterIJEligibilityCheck:()=>A,trackInteractiveJourneyAssigned:()=>E,trackInteractiveJourneyExpandedBubbleViewed:()=>u,trackInteractiveJourneyMilestoneAchieved:()=>_,trackInteractiveJourneyModalClicked:()=>I,trackInteractiveJourneyModalDismissed:()=>d,trackInteractiveJourneyModalViewed:()=>l,trackInteractiveJourneyStopped:()=>S,trackInteractiveJourneyWidgetDismissed:()=>c});var i=n(93732),s=n(1199),r=n(86902),a=n(35457),o=n(79206);let l=e=>{let{steps:t,userTypeMessage:n}=e,i=y(t);(0,o.u4)("Interactive Journey Modal Viewed",{user_type:n,...i})},d=e=>{let{steps:t,userTypeMessage:n}=e,i=y(t);(0,o.u4)("Interactive Journey Modal Dismissed",{user_type:n,...i})},u=(e,t)=>{let n=p(e);n===a.Os.MilestoneSignUpAchieved&&sessionStorage.setItem(s.o.INTERACTIVE_JOURNEY_TRACKED_SIGN_UP,"true"),(0,o.u4)("Interactive Journey Expanded Widget Viewed",{message_type:n,user_type:t})},c=e=>{let{widgetId:t,steps:n,userTypeMessage:i}=e,s=p(t),r=y(n);(0,o.u4)("Interactive Journey Widget Dismissed",{message_type:s,user_type:i,...r})},_=(e,t)=>{(0,o.u4)("Interactive Journey Milestone Achieved",{milestone_name:e,user_type:t}),e===a.Os.MilestoneSubscribeAchieved&&(0,o.u4)("Interactive Journey Subscribe Milestone Achieved",{message_type:e,user_type:t})},I=(e,t)=>{let n={[r.K3.INSTALL]:"milestone_install",[r.K3.SIGN_UP]:"milestone_sign_up",[r.K3.ENABLE_WHATSAPP]:"milestone_subscribe_whatsapp",[r.K3.ENABLE_PUSH_NOTIFICATION]:"milestone_pn"}[e];n&&(0,o.u4)("Interactive Journey Modal Clicked",{milestone_action:n,user_type:t})},E=e=>{(0,o.u4)("IJ Assigned",e,{shouldIncludeSourcePageType:!0})},S=e=>{e&&(0,o.u4)("IJ Stopped",{stop_condition:e})},A=e=>{let t,{isIJEnabled:n,userTypeMessage:a,stopCondition:o,user:l}=e,d=localStorage.getItem(r.Hh.ASSIGN_IJ),u=sessionStorage.getItem(s.o.INTERACTIVE_JOURNEY_LOGIN_METHOD);if(t=l?"signUp"===u?r.bM.SIGNED_UP:r.bM.LOGGED_IN:r.bM.ANONYMOUS,n&&null===d){E({first_assigned:!0,user_state:t,user_type:a}),(0,i.ZB)(r.Hh.ASSIGN_IJ,"true");return}if(n&&"true"===d){E({first_assigned:!1,user_state:t,user_type:a});return}if(!n&&null!==d){S(o);return}},p=e=>{switch(e){case r.cj.SIGNED_UP:return a.Os.MilestoneSignUpAchieved;case r.cj.ENABLED_WHATSAPP:return a.Os.MilestoneSubscribeAchieved;default:return a.Os.EarnReward}},y=e=>{let t={[a.fl.Install]:a.jY.NotAchieved,[a.fl.SignUp]:a.jY.NotAchieved,[a.fl.PushNotification]:a.jY.NotAchieved,[a.fl.Subscribe]:a.jY.NotAchieved};return e.forEach(e=>{let{identifier:n,shouldShowVoucher:i}=e;if(i)switch(n){case r.K3.INSTALL:case r.K3.ENABLE_PUSH_NOTIFICATION:return;case r.K3.SIGN_UP:t[a.fl.SignUp]=a.jY.Achieved;return;case r.K3.ENABLE_WHATSAPP:t[a.fl.Subscribe]=a.jY.Achieved;return}}),t},h=e=>{switch(e){case r.an.EXISTING:return r.f9.EXISTING;case r.an.NEW:return r.f9.NEW;default:return}},v=e=>{let{isIJEnabled:t,userType:n}=e,i=s.o.INTERACTIVE_JOURNEY_ORIGIN_STEP;return sessionStorage.getItem(i)?(sessionStorage.removeItem(i),{}):{nc_interactive_variant:t&&n===r.an.NEW?"nc_interactive_journey":"false",list_id:t?"interactive_journey":void 0}}},28149:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(21462),s=n(75908),r=n(81953),a=n(88677);let o=()=>{let{data:e}=(0,a.A)(),t=(0,s.A)(e?"/v1/newsletters":null,r.S);return(0,i.useEffect)(()=>{let{data:e}=t;window.__NEWS_LETTER__=e},[t]),t}},31470:(e,t,n)=>{n.d(t,{ER:()=>I,Ht:()=>l,Qp:()=>u,dF:()=>E,di:()=>c,jA:()=>a,lO:()=>_,o1:()=>S,qS:()=>d,rT:()=>o});var i=n(9218),s=n(86902),r=n(15622);let a=e=>e.isEnabled,o=e=>e.userType,l=e=>e.isUserTypeTransition,d=e=>e.shouldShowConfetti,u=e=>e.confettiCount,c=e=>e.accomplishedStep,_=e=>(0,r.getUserTypeTrackingMessage)(o(e)),I=e=>{let{userType:t,shouldShowConfetti:n,isUserTypeTransition:r}=e;return{growAnimationDelay:n&&t===s.an.EXISTING?i.m2:i.ZO,shrinkAnimationDelay:r?i.DM:i.ZO}},E=e=>{let{isIJWidgetClosed:t,isEnabled:n}=e;return n&&!t},S=e=>({setIsIJEnabled:e.setIsIJEnabled,setIJUserType:e.setIJUserType,setShouldShowIJConfetti:e.setShouldShowIJConfetti,setAccomplishedStep:e.setAccomplishedStep,setIsUserTypeTransition:e.setIsUserTypeTransition,setIsIJWidgetClosed:e.setIsIJWidgetClosed})},35457:(e,t,n)=>{n.d(t,{Os:()=>r,fl:()=>i,jY:()=>s});var i=function(e){return e.Install="install_milestone",e.SignUp="signup_milestone",e.PushNotification="pn_milestone",e.Subscribe="subscribe_milestone",e}({}),s=function(e){return e.Achieved="achieved",e.NotAchieved="not_achieved",e}({}),r=function(e){return e.EarnReward="earn_reward_message",e.MilestoneSignUpAchieved="milestone_sign_up_achieved",e.MilestoneSubscribeAchieved="milestone_subscribe_achieved",e}({})},42097:(e,t,n)=>{n.d(t,{Wq:()=>o,YT:()=>s,h5:()=>a,nm:()=>i,oQ:()=>r});var i=function(e){return e[e.EMPTY=0]="EMPTY",e[e.REQUIRED_FIELD=1]="REQUIRED_FIELD",e[e.INVALID_EMAIL=2]="INVALID_EMAIL",e[e.PASSWORD_T00_SHORT=3]="PASSWORD_T00_SHORT",e[e.PASSWORD_T00_LONG=4]="PASSWORD_T00_LONG",e}({}),s=function(e){return e.Female="female",e.Male="male",e}({});let r=30;var a=function(e){return e.Facebook="Facebook",e.Google="Google",e.Email="Email",e}({}),o=function(e){return e.SIGN_IN="Signed In",e.SIGN_UP="Signed Up",e}({})},66194:(e,t,n)=>{let i;n.d(t,{j:()=>_,K:()=>c});var s=n(26543),r=n(49759),a=n(31470),o=n(15475),l=n(1141),d=n(86902);let u=()=>(0,o.y)((0,l.m)((e,t)=>({isEnabled:!1,shouldShowConfetti:!1,confettiCount:0,userType:d.an.UNKNOWN,isUserTypeTransition:!1,isIJWidgetClosed:!1,setIsIJEnabled:t=>{e(e=>{e.isEnabled=t})},setIJUserType:t=>{e(e=>{e.userType=t})},setShouldShowIJConfetti:n=>{let i=t().confettiCount;e(e=>{e.shouldShowConfetti=n,n&&(e.confettiCount=i+1)})},setAccomplishedStep:t=>{e(e=>{e.accomplishedStep=t})},setIsUserTypeTransition:t=>{e(e=>{e.isUserTypeTransition=t})},setIsIJWidgetClosed:t=>{e(e=>{e.isIJWidgetClosed=t})}}))),c=e=>(i||(i=u()),(0,s.P)(i,e)),_=()=>c((0,r.k)(a.o1))},75955:(e,t,n)=>{n.d(t,{A:()=>N});var i=n(21462),s=n(42097),r=n(56063),a=n(66194),o=n(31470),l=n(65967),d=n(79206);let u=()=>new l.Ay().get(d.Du),c=()=>{new l.Ay().remove(d.Du)};var _=n(21159),I=n(88391),E=n(10644),S=n(36664),A=n(33159),p=n(89305),y=n(15622);let h=(e,t)=>{let{isUserSubscribedNewsLetter:n,interactiveJourneyData:i,loginMethod:r,user:a}=t;if(!a.Zuid||!(0,d.Q2)())return;let o=a.Zuid,l=(0,A.w)("CC"),u=(0,d.Vk)({user:a,venture:l,emailSubscribed:n});(0,d.ls)(o,u);let c=(0,y.getIJDataForAuthentication)({isIJEnabled:i.isEnabled,userType:i.userType}),_=e===s.Wq.SIGN_UP;window.analytics.track(e,{..._?{email:a.Email,email_gender:a.Gender,first_name:a.FirstName,last_name:a.LastName}:{},list_id:c.list_id,login_method:r,nc_interactive_variant:c.nc_interactive_variant,platform_source:(0,d.JU)(),source_page_type:(0,p.M5)(),revision:(0,A.w)("REVISION"),user_id:o,venture_code:l},{context:{internal_anonymous_id:(0,S.lA)(),traits:u}})};var v=n(41863),f=n(28149),T=n(88677),g=n(32563);let N=()=>{let e=(0,v.O)(r.A.Bob.LOTUS_ENABLE_INTERACTIVE_JOURNEY),t=(0,a.K)(o.rT),[l,S]=(0,i.useState)(()=>(0,_.A)()?void 0:u()),{data:A}=(0,T.A)(),{data:p,isLoading:y}=(0,f.A)();return(0,i.useEffect)(()=>{l&&n.e(4018).then(n.bind(n,94018)).then(e=>{let{persistAuthenticationInfo:t}=e;t(l)}).catch(()=>{})},[l]),(0,g.y)(()=>{A&&l&&((0,E.YE)(),(0,d.at)(l,A,p,{isEnabled:!!e,userType:t}),c(),S(void 0))},!!l&&!!A&&!y&&"boolean"==typeof e&&"string"==typeof t),{onTrackUserAuthentication:(0,i.useCallback)(i=>{let{eventName:r,loginMethod:a,user:o,isUserSubscribedNewsLetter:l=!1}=i;o&&((0,E.YE)(),(0,I.H)(o),h(r,{isUserSubscribedNewsLetter:l,interactiveJourneyData:{isEnabled:!!e,userType:t},loginMethod:a,user:o}),n.e(4018).then(n.bind(n,94018)).then(e=>{let{persistAuthenticationInfo:t}=e;t(r===s.Wq.SIGN_UP?"signUp":"signIn")}).catch(()=>{}))},[e,t])}}},81953:(e,t,n)=>{n.d(t,{S:()=>s});var i=n(73140);let s=async()=>{let{data:e,error:t}=await i.A.request("GET /newsletters",{request:{credentials:"include"}});if(t)throw t;return e.Newsletters||[]}},88391:(e,t,n)=>{n.d(t,{H:()=>a});var i=n(36664),s=n(33159),r=n(31202);let a=e=>{window.__USER__=e;let t=(0,s.w)("SEGMENT_API_KEY");t&&(0,r.Q2)()&&"load"in window.analytics&&((0,r.OF)(),window.analytics.addSourceMiddleware(e=>{let{payload:t,next:n}=e;try{let e=t.obj.context.traits||{};window.__USER__&&0===Object.keys(e).length&&(t.obj.context.traits=window.analytics.user().traits()),t.obj.context.internal_anonymous_id=(0,i.lA)()}catch(e){}n(t)}),analytics.load(t,{flushAt:1}))}},88677:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(75908),s=n(73140),r=n(11691),a=n(88391);let o=()=>{let e=(0,r.$)(),t=(0,r.Z)(e);return(0,i.A)(t?null:"/v1/customers",async()=>{let{data:e}=await s.A.request("GET /customers",{request:{credentials:"include"}});return e},{dedupingInterval:6e4,shouldRetryOnError:!1,revalidateOnMount:!0,fallbackData:void 0,onSuccess:e=>{(0,a.H)(e)},onError:()=>{(0,a.H)(null)}})}},90530:(e,t,n)=>{n.d(t,{A:()=>i});let i=e=>{var t;if(window){if("scheduler"in window&&"function"==typeof(null===(t=window.scheduler)||void 0===t?void 0:t.postTask)){window.scheduler.postTask(e,{priority:"background"});return}if("requestIdleCallback"in window){requestIdleCallback(e);return}setTimeout(e,0)}}}}]);
//# sourceMappingURL=276-ebd083718cac96d3.js.map